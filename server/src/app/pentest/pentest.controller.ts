import { Controller, Get } from '@nestjs/common';
import { PentestService } from './pentest.service';

import { spawnSync } from 'child_process';
import { readFile } from 'fs/promises';

@Controller('pentest')
export class PentestController {
  constructor(private readonly pentestService: PentestService) {}

  @Get('')
  async get() {
    const pythonProcess = spawnSync('python3', ['src//scripts/init.py']);

    const result = pythonProcess.stdout?.toString()?.trim();
    const error = pythonProcess.stderr?.toString()?.trim();

    console.log(result);
    console.log(error);

    return 'Python Script: ' + result;
  }
}
